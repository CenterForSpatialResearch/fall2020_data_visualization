<!DOCTYPE html>
<meta charset="utf-8">
<head>
  <title>arc</title>
</head>

<style>

</style>

<body>


  <script src="d3.js"></script>
  <script>
 
  var w = 1000
  var h = 1000
  var svg = d3.select("body").append("svg").attr("width",w).attr("height",h)
    
    
    var data = []
    for(var i =0; i<100; i++){
      data.push(Math.random()*w/2+w/2)
    }
 
// http://bl.ocks.org/d3indepth/b6d4845973089bc1012dec1674d3aff8
function generateArc(l,index){
  // var lineGenerator = d3.line()
  //   .curve(d3.curveNatural);

  //var path = d3.select('svg').append("path").attr('class',"arc_"+index)
// var margin = 20
//   var points = [
//     [margin,h-margin],
//     [l*.5, h-l*.2],
//     [l-margin,h-margin]
//   ];

 // var path = svg
//     .append("path")
//     .attr('class',"arc_"+index)
//     .attr('d', lineGenerator(points))
//     .style("stroke",function(){
//       return "black"
//     })
//     .style("fill","none")
//     .style("opacity",.2)
  console.log(l)
  
  var arc = d3.arc()
    .innerRadius(0)
    .outerRadius(l);

    var myString = arc({
      startAngle: -Math.PI/4,
      endAngle: (Math.PI/4)
    }).split(/[A-Z]/);

    var sector = svg.append("path")
      .attr("fill", "none")
      .attr("stroke-width", 1)
    .attr("stroke","#000000")
      .attr("d", "M" + myString[1] + "A" + myString[2])
    .attr("transform","translate(200,200)")
    
    var pl = path.node().getTotalLength(); 
    
    //
  //   path.attr("stroke-dasharray", (pl)+" "+(pl*1.1))
  //   .attr("stroke-dashoffset", l)
  //   .transition()
  //   .delay(function(){<img src="../../../../Desktop/Screen Shot 2020-09-30 at 2.59.03 PM.png" width="1973" height="1480" alt="Screen Shot 2020 09 30 At 2.59.03 PM">
  //     if(index<5){
  //       return index*5000
  //     }else{
  //       return index*100+25000
  //     }
  //   })
  //   .duration(5000)
  //   .attr("stroke-dashoffset", 0);
  //
  //
   svg.append("circle")
         .attr("cx", 0) //Starting x
         .attr("cy", 0) //Starting y
         .attr("r", 3)
         .transition()
     .delay(function(){
       if(index<5){
         return index*5000
       }else{
         return index*100+25000
       }
     })
     .duration(5000)
     .tween("pathTween", function(){return pathTween(path)})    
}

for(var d in data){
  var l = data[d]
  generateArc(l,d)
  
}

function pathTween(path){
			var length = path.node().getTotalLength(); // Get the length of the path
			var r = d3.interpolate(0, length); //Set up interpolation from 0 to the path length
			return function(t){
				var point = path.node().getPointAtLength(r(t)); // Get the next point along the path
				d3.select(this) // Select the circle
					.attr("cx", point.x) // Set the cx
					.attr("cy", point.y) // Set the cy
			}
		}
  </script>
</body>
</html>